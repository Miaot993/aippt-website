---
// src/components/home/Price.astro
// 商业变现的最终收口。清晰对比 Lite（免费/体验）与 Pro（付费/高级）的权益差异，提供明确的购买入口或 Access Key 验证通道。
// 【架构师注释】这里包含两张定价卡片，以及密码核对和跳转的核心脚本
---

<section id="pricing" class="py-12 lg:py-24 px-6 bg-zinc-50 dark:bg-[#09090b]/50 relative overflow-hidden">
  <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[500px] bg-indigo-500/5 blur-[100px] rounded-full pointer-events-none"></div>

  <div class="max-w-5xl mx-auto relative z-10">
    <div class="text-center mb-16">
      <h2 class="text-xl md:text-3xl font-bold text-zinc-400 dark:text-zinc-500 mb-2 leading-tight">选择被时代淘汰，</h2>
      <p class="text-3xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-[#E0A75F] to-[#F3C586] animate-pulse">还是选择领先时代？</p>
    </div>

    <div class="grid md:grid-cols-2 gap-8 items-stretch">
      {/* Lite 卡片 */}
      <div class="group relative flex flex-col h-full bg-white dark:bg-[#18181b] rounded-3xl border border-zinc-200 dark:border-zinc-800 p-8 transition-all duration-500 hover:-translate-y-2 hover:shadow-xl dark:hover:shadow-none">
        <div class="mb-6"><span class="px-4 py-1.5 bg-zinc-100 dark:bg-zinc-800 text-xs font-bold uppercase rounded-full">Lite Plan</span></div>
        <div class="mb-2">
          <h3 class="text-2xl font-bold text-zinc-900 dark:text-white">单次项目尝鲜</h3>
          <p class="text-sm text-zinc-500 mt-2">适合偶尔需要高质量 PPT 的用户。</p>
        </div>
        <div class="flex items-baseline gap-1 mb-8 border-b border-zinc-100 dark:border-zinc-800 pb-8">
          <span class="text-4xl font-bold text-zinc-900 dark:text-white">¥39.9</span>
          <span class="text-zinc-400 text-sm">/ Project</span>
        </div>
        <ul class="space-y-4 mb-8 text-sm text-zinc-600 dark:text-zinc-300 flex-grow">
        {/* 项目 1：可用项 - 蓝色打钩 */}
        <li class="flex items-center gap-3">
            <div class="w-5 h-5 rounded-md bg-indigo-500 flex items-center justify-center text-white border-none shrink-0 shadow-sm shadow-indigo-500/20">
            <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
            </svg>
            </div>
            <span class="text-zinc-900 dark:text-zinc-100 font-medium">任选 1 份商业级 PPT 源文件</span>
        </li>

        {/* 项目 2：可用项 - 蓝色打钩 */}
        <li class="flex items-center gap-3">
            <div class="w-5 h-5 rounded-md bg-indigo-500 flex items-center justify-center text-white border-none shrink-0 shadow-sm shadow-indigo-500/20">
            <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
            </svg>
            </div>
            <span class="text-zinc-900 dark:text-zinc-100 font-medium">基础 AI 工具列表清单</span>
        </li>

        {/* 项目 3：不可用项 - 灰色盒子 + 叉号 */}
        <li class="flex items-center gap-3 opacity-60">
            <div class="w-5 h-5 rounded-md bg-zinc-200 dark:bg-zinc-600 flex items-center justify-center text-zinc-800 dark:text-zinc-200 border-none shrink-0">
            <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
            </div>
            <span class="text-zinc-500 dark:text-zinc-400 font-medium">不含详细操作 SOP 教程</span>
        </li>

        {/* 项目 4：不可用项 - 灰色盒子 + 叉号 */}
        <li class="flex items-center gap-3 opacity-60">
            <div class="w-5 h-5 rounded-md bg-zinc-200 dark:bg-zinc-600 flex items-center justify-center text-zinc-800 dark:text-zinc-200 border-none shrink-0">
            <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
            </div>
            <span class="text-zinc-500 dark:text-zinc-400 font-medium">不含后续永久更新</span>
        </li>
        </ul>
        {/* Lite 密码输入框 */}
        <div class="mt-auto pt-6">
          <div class="relative group-hover:scale-[1.02] transition-transform duration-300">
            <input type="password" id="lite-input" placeholder="输入 Lite 密钥解锁" class="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-xl px-4 py-4 text-sm focus:outline-none focus:border-indigo-500 font-mono text-zinc-900 dark:text-white" />
            <button id="lite-btn" class="absolute right-2 top-2 bottom-2 px-4 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-xs font-bold text-zinc-600 dark:text-zinc-300 hover:bg-indigo-600 hover:text-white transition-colors">进入</button>
          </div>
          <p id="lite-msg" class="text-xs text-red-400 mt-2 hidden pl-1">密钥无效</p>
        </div>
      </div>

      {/* Pro 卡片 */}
      <div class="group relative flex flex-col h-full bg-[#18181b] rounded-3xl border border-zinc-800 p-8 transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl hover:shadow-amber-500/10 z-0 overflow-hidden">
        <div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-amber-500/30 to-transparent"></div>
        <div class="mb-6 flex justify-between items-start relative z-10">
          <span class="px-3 py-1 bg-white text-black border border-zinc-200 text-[10px] font-bold uppercase rounded-full shadow-[0_0_15px_rgba(255,255,255,0.3)]">Pro Plan</span>
          <span class="text-[10px] font-mono text-[#F3C586] border border-[#775934] bg-[#2E200F] px-2 py-1 rounded">BEST VALUE</span>
        </div>
        <div class="mb-2 relative z-10">
          <h3 class="text-2xl font-bold text-white">全栈工作流 (SOP)</h3>
          <p class="text-sm text-zinc-400 mt-2">掌握核心能力，成为 AI 时代的超级个体。</p>
        </div>
        <div class="flex items-baseline gap-2 mb-8 border-b border-zinc-800 pb-8 relative z-10">
          <span class="text-4xl font-bold text-white tracking-tight">¥129</span>
          <span class="text-zinc-500 text-sm line-through decoration-zinc-600">¥299</span>
        </div>
        <ul class="space-y-4 mb-8 text-sm text-zinc-300 flex-grow relative z-10">
          <li class="flex items-center gap-3">
            {/* 👇 金色打钩方块核心代码 */}
          <div class="w-5 h-5 rounded-md bg-gradient-to-r from-[#F3C586] to-[#F3C586] flex items-center justify-center text-zinc-900 border-none shrink-0 shadow-sm shadow-amber-500/20">
            <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
            </svg>
          </div>
          <span class="text-zinc-100">全站资源库 <span class="text-zinc-500 text-xs">(源文件+Prompt)</span></span>
          </li>
          <li class="flex items-center gap-3">
            <div class="w-5 h-5 rounded-md bg-gradient-to-r from-[#F3C586] to-[#F3C586] flex items-center justify-center text-zinc-900 border-none shrink-0 shadow-sm shadow-amber-500/20">
            <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
            </svg>
          </div>
          <span class="text-zinc-100"> Stable Diffusion 独家 LoRA</li>
          <li class="flex items-center gap-3"><div class="w-5 h-5 rounded-md bg-gradient-to-r from-[#F3C586] to-[#F3C586] flex items-center justify-center text-zinc-900 border-none shrink-0 shadow-sm shadow-amber-500/20">
            <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
            </svg>
          </div>
          <span class="text-zinc-100"> 永久订阅制 (含未来更新)</li>
          <li class="flex items-center gap-3"><div class="w-5 h-5 rounded-md bg-gradient-to-r from-[#F3C586] to-[#F3C586] flex items-center justify-center text-zinc-900 border-none shrink-0 shadow-sm shadow-amber-500/20">
            <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
            </svg>
          </div>
          <span class="text-zinc-100"> 专属 Ai 交流社群</li>
        </ul>
        {/* Pro 密码输入框 */}
        <div class="mt-auto pt-6 relative z-10">
          <div class="relative group-hover:scale-[1.01] transition-transform duration-300">
            <input type="password" id="pro-input" placeholder="输入 Pro 密钥" class="w-full bg-[#09090b] border border-zinc-700 rounded-xl px-4 py-4 text-sm text-white focus:outline-none focus:border-[#E0A75F] font-mono placeholder:text-zinc-600" />
            <button id="pro-btn" class="absolute right-2 top-2 bottom-2 px-5 bg-gradient-to-r from-[#E0A75F] to-[#F3C586] text-zinc-900 border border-transparent rounded-lg text-xs font-bold hover:from-amber-500 hover:to-[#F3C586] transition-all shadow-[0_0_15px_rgba(245,158,11,0.3)]">解锁</button>
          </div>
          <p id="pro-msg" class="text-xs text-red-400 mt-2 hidden pl-1">密钥无效</p>
        </div>
      </div>
    </div>
  </div>
</section>

{/* 核心业务逻辑：密码验证脚本 */}
<script is:inline>
  (function() {
    const KEYS = {
      LITE: ["vip399", "demo123"],
      PRO: ["vip888", "admin666"]
    };

    function handleLogin(type) {
      const inputEl = document.getElementById(type === 'lite' ? 'lite-input' : 'pro-input');
      const msgEl = document.getElementById(type === 'lite' ? 'lite-msg' : 'pro-msg');
      if (!inputEl) return;
      
      const val = inputEl.value.trim();
      inputEl.classList.remove('border-red-500', 'ring-2', 'ring-red-500');
      if (msgEl) msgEl.classList.add('hidden');

      let targetRole = null;
      let targetUrl = '';

      if (type === 'lite') {
        if (KEYS.LITE.includes(val) || KEYS.PRO.includes(val)) { targetRole = 'lite'; targetUrl = '/overview'; }
      } else {
        if (KEYS.PRO.includes(val)) { targetRole = 'pro'; targetUrl = '/overview'; }
      }

      if (targetRole) {
        localStorage.setItem('user_role', targetRole);
        localStorage.setItem('access_token', val); 
        inputEl.classList.add('border-green-500', 'text-green-600');
        if (msgEl) {
          msgEl.textContent = '验证成功，正在跳转...';
          msgEl.classList.remove('text-red-400', 'hidden');
          msgEl.classList.add('text-green-500');
        }
        setTimeout(() => window.location.href = targetUrl, 500);
      } else {
        inputEl.classList.add('border-red-500', 'ring-2', 'ring-red-500/20');
        inputEl.style.animation = 'shake 0.5s';
        setTimeout(() => inputEl.style.animation = '', 500);
        if (msgEl) {
          msgEl.textContent = '密钥无效，请核对后重试';
          msgEl.classList.remove('hidden');
        }
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('lite-btn')?.addEventListener('click', () => handleLogin('lite'));
      document.getElementById('pro-btn')?.addEventListener('click', () => handleLogin('pro'));
      
      const bindEnter = (id, type) => {
        document.getElementById(id)?.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') handleLogin(type);
        });
      };
      bindEnter('lite-input', 'lite');
      bindEnter('pro-input', 'pro');
      
      const style = document.createElement('style');
      style.textContent = `@keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }`;
      document.head.appendChild(style);
    });
  })();
</script>