---
// src/components/Paywall.astro
---

{/* ğŸ›¡ï¸ æ ¸å¿ƒå¤§æ‹›ï¼šCSS ç»å¯¹é˜²å¾¡åŠ›åœº */}
<style is:inline id="paywall-css-lock">
  /* 1. ä¿ç•™æ–‡ç« å‰2ä¸ªå…ƒç´ (æ ‡é¢˜å’Œå¯¼è¯­)ï¼Œä»ç¬¬6ä¸ªå…ƒç´ èµ·å…¨éƒ¨å¼ºåˆ¶é«˜æ–¯æ¨¡ç³Šï¼ */
  .sl-markdown-content > *:nth-child(n+6):not(#pro-paywall):not(style):not(script) {
      filter: blur(8px) !important;
      opacity: 0.15 !important;
      pointer-events: none !important;
      user-select: none !important;
      transition: all 0.3s ease;
  }
  /* 2. ç›´æ¥éšè—æ‰è¿‡é•¿çš„å†…å®¹ï¼Œé˜²æ­¢ç”¨æˆ·ä¸€ç›´å¾€ä¸‹æ»š */
  .sl-markdown-content > *:nth-child(n+7):not(#pro-paywall):not(style):not(script) {
      display: none !important;
  }
  /* 3. æŠŠæ‹¦æˆªå¡ç‰‡å¾€ä¸Šæï¼Œæ­£å¥½ç›–åœ¨è¢«æ¨¡ç³Šçš„å†…å®¹ä¸Šæ–¹ */
  #pro-paywall {
      margin-top: 0px !important; 
      position: relative;
      z-index: 999;
      padding-bottom: 2rem;
  }
</style>

<div id="pro-paywall" class="w-full clear-both flex justify-center">
  <div class="relative z-50 w-full max-w-md mx-auto">
    {/*
        ğŸ‘‡ ä¿®æ”¹ 1ï¼šå¡ç‰‡å®¹å™¨å¢å¼º
        åœ¨åŸæ¥çš„ class åŸºç¡€ä¸Šï¼Œå¢åŠ äº† 'flex flex-col items-center'
        è¿™èƒ½ç¡®ä¿é‡Œé¢çš„å›¾æ ‡ã€æ ‡é¢˜ã€æ–‡å­—ã€æŒ‰é’®å…¨éƒ¨å¼ºåˆ¶æ°´å¹³å±…ä¸­å¯¹é½ã€‚
    */}
    <div class="bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-8 shadow-2xl shadow-indigo-500/20 flex flex-col items-center text-center transform hover:scale-[1.02] transition-transform">

      {/* å›¾æ ‡å®¹å™¨ï¼šè¿™é‡Œçš„ mx-auto ç°åœ¨æœ‰äº†åŒé‡ä¿é™© */}
      <div class="w-12 h-12 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
      </div>

      <h3 class="text-xl font-bold text-zinc-900 dark:text-white mb-2">è§£é” Pro æƒé™</h3>
      
      {/* ğŸ‘‡ æ ¸å¿ƒä¿®å¤ï¼šåˆ æ‰äº†å¤±æ•ˆçš„ Tailwind ç±»åï¼Œç›´æ¥åŠ¨ç”¨ style="margin-bottom: 40px;" 
          è¿™é‡Œçš„ 40px ä½ å¯ä»¥éšæ„ä¿®æ”¹ï¼Œæ•°å­—è¶Šå¤§ï¼Œé—´è·è¶Šå¤§ï¼ç»å¯¹ç”Ÿæ•ˆï¼
      */}
      <p 
        class="text-sm text-zinc-500 dark:text-zinc-400 leading-relaxed" 
        style="margin-bottom: 40px;"
      >
        æ‚¨æ­£åœ¨ä½¿ç”¨ Lite ä½“éªŒç‰ˆã€‚<br/>å‡çº§ Proï¼Œç«‹å³è§£é”å…¨ç«™æ ¸å¿ƒå·¥ä½œæµã€å•†ä¸šæºæ–‡ä»¶<br/>ä»¥åŠåç»­æ°¸ä¹…æ›´æ–°ã€‚
      </p>
      
      <a href="/#pricing" class="block w-full py-3.5 px-4 bg-zinc-900 dark:bg-white !text-white dark:!text-zinc-900 !no-underline rounded-xl font-bold transition-colors shadow-lg">
        ç«‹å³è·å– Access Key
      </a>

    </div>
  </div>
</div>

<script is:inline>
  (function() {
    // ğŸ’¡ åªæœ‰ Pro ç”¨æˆ·ç™»å½•äº†ï¼ŒJS æ‰ä¼šå‡ºé¢æŠŠ CSS é˜²å¾¡ç½‘æ‹†é™¤
    const checkPro = () => {
      const userRole = localStorage.getItem('user_role');
      if (userRole === 'pro') {
        const wall = document.getElementById('pro-paywall');
        if (wall) wall.remove();
        const lock = document.getElementById('paywall-css-lock');
        if (lock) lock.remove();
      }
    };
    
    checkPro();
    document.addEventListener('astro:page-load', checkPro);
  })();
</script>